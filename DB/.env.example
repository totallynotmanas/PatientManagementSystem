# Supabase Configuration

## Environment Variables for Supabase

Copy this file to `frontend/app/.env.local` and fill in your Supabase credentials.

```env
# Supabase Project URL
# Found in: Supabase Dashboard → Settings → API
REACT_APP_SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anonymous Key (for client-side)
# Found in: Supabase Dashboard → Settings → API → Project API keys
REACT_APP_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Optional: Supabase Service Role Key (for server-side only - DO NOT expose to client)
# REACT_APP_SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Backend API URL (if using separate backend)
REACT_APP_API_URL=http://localhost:8080/api

# Feature Flags
REACT_APP_ENABLE_MFA=false
REACT_APP_ENABLE_TELEMEDICINE=false
REACT_APP_ENABLE_AI_ASSISTANT=false
```

## Getting Your Supabase Credentials

### 1. Get Project URL
- Go to [supabase.com](https://supabase.com)
- Login to your project
- Navigate to **Settings** → **API**
- Copy **Project URL**

### 2. Get Anonymous Key
- In the same **Settings** → **API** page
- Look for **Project API keys** section
- Copy the **anonymous/public** key
- **DO NOT use the service_role key** on the client side

### 3. Complete Your .env.local
```
REACT_APP_SUPABASE_URL=https://xyzabc123.supabase.co
REACT_APP_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5emFiYzEyMyIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjc4OTAxMDAwLCJleHAiOjE5OTQ0NzcwMDB9.abcd1234_your_key_here
```

## Important Security Notes

⚠️ **Never commit .env.local to version control**
- .env.local is in .gitignore
- Use secure secret management for production
- Rotate keys regularly

⚠️ **Anonymous Key Security**
- The anonymous key is safe to expose to clients
- It works with RLS policies to restrict access
- Users can only access their own data (enforced by RLS)

⚠️ **Service Role Key**
- NEVER expose service role key in frontend code
- Only use on secure backend servers
- Has admin access, bypasses RLS policies

## Testing Credentials

For development/testing, you can use Supabase's built-in test accounts:

```bash
Email: test@example.com
Password: Test123!@#
Role: patient
```

## Next Steps

1. Create your .env.local file with your Supabase credentials
2. Run `npm install @supabase/supabase-js` in frontend/app
3. Test authentication by running the login page
4. Check Supabase Dashboard → SQL Editor for database logs

## Troubleshooting

### "Missing Supabase credentials" error
- Ensure .env.local exists in frontend/app/ directory
- Verify REACT_APP_SUPABASE_URL is correct
- Verify REACT_APP_SUPABASE_ANON_KEY is complete
- Restart development server after changing .env.local

### CORS errors
- Check Supabase Dashboard → Settings → Auth → Redirect URLs
- Add your frontend URL (e.g., http://localhost:3000)

### Authentication fails
- Verify user exists in Supabase Auth
- Check user role is set correctly
- Ensure RLS policies match user role
- Check audit_logs table for error details
